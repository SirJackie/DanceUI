<!DOCTYPE html>
<html>
    <head>
        <title>c</title>
        <link href="DanceUI.css" rel="stylesheet" type="text/css">
        <!-- <script src="DanceUI.js"></script> -->
    </head>
    <body>
        <line>
            <dance>1x</dance>
            <dance>1x</dance>
            <dance>1x</dance>
            <dance>1x</dance>
        </line>

        <line>
            <dance>1x</dance>
            <dance>1x</dance>
            <dance>1x</dance>
        </line>

        <line>
            <dance>1x</dance>
            <dance>1x</dance>
        </line>

        <line>
            <dance>1x</dance>
        </line>

        <line>
            <dance>
                <line>
                    <dance>1x</dance>
                    <dance>1x</dance>
                </line>

                <line>
                    <dance>1x</dance>
                </line>
            </dance>
        </line>

        <line>
            <dance width="4f">4x</dance>
            <dance width="3f">3x</dance>
            <dance width="2f">2x</dance>
            <dance width="1f">1x</dance>
        </line>

        <line>
            <dance width="3f">3x</dance>
            <dance width="2f">2x</dance>
            <dance width="1f">1x</dance>
        </line>

        <line>
            <dance width="2f">2x</dance>
            <dance width="1f">1x</dance>
        </line>

        <line>
            <dance>1x</dance>
        </line>

        <line>
            <dance>
                <line>
                    <dance width="3f">3x</dance>
                    <dance width="1f">1x</dance>
                </line>

                <line>
                    <dance width="2f">2x</dance>
                    <dance width="1f">1x</dance>
                </line>
            </dance>
        </line>
        <script>
            function f2num(str){
                var resultStr = str.match(/\d+f/)[0];
                return Math.floor(resultStr.substr(0,resultStr.length-1));
            }

            function refresh(parent){
                for(var i = 0; i < parent.childNodes.length; i++){
                    // console.log("parent:");
                    // console.log(parent);
                    // console.log("parent.childNodes[" + i +"]");
                    // console.log(parent.childNodes[i]);
                    if(parent.childNodes[i].tagName == "LINE"){
                        //<line>
                    }
                    else if(parent.childNodes[i].tagName == "DANCE"){

                        /*
                        ** Process <dance> Tag
                        */

                        /* Get the Width and Height attribute from <dance> Tag */
                        var danceWidthStr  = parent.childNodes[i].getAttribute("width");
                        var danceHeightStr = parent.childNodes[i].getAttribute("height");

                        if(danceWidthStr == null){
                            parent.childNodes[i].setAttribute("width", "1f");
                            danceWidthStr = "1f";
                        }
                        if(danceHeightStr == null){
                            parent.childNodes[i].setAttribute("height", "1h");
                            danceHeightStr = "1h";
                        }
                        console.log(danceWidthStr);
                        console.log(danceHeightStr);

                        /* Process Width */
                        var danceWidthF = f2num(danceWidthStr);
                        console.log(danceWidthF);
                    }
                    refresh(parent.childNodes[i]);
                }
            }

            refresh(document.getElementsByTagName("body")[0]);

            // var dance = document.getElementsByTagName("dance");
            // var i = 0;
            // var danceHeightStr = dance[i].getAttribute("height");
            // console.log(danceHeightStr);

            // var danceHeightF = f2num(danceHeightStr);
            // console.log(danceHeightF);
        </script>
    </body>
</html>