<!DOCTYPE html>
<html>
    <head>
        <title>c</title>
        <link href="DanceUI.css" rel="stylesheet" type="text/css">
        <!-- <script src="DanceUI.js"></script> -->
    </head>
    <body>
        <line>
            <dance>1x</dance>
            <dance>1x</dance>
            <dance>1x</dance>
            <dance>1x</dance>
        </line>

        <line>
            <dance>1x</dance>
            <dance>1x</dance>
            <dance>1x</dance>
        </line>

        <line>
            <dance>1x</dance>
            <dance>1x</dance>
        </line>

        <line>
            <dance>1x</dance>
        </line>

        <line>
            <dance>
                <line>
                    <dance>1x</dance>
                    <dance>1x</dance>
                </line>

                <line>
                    <dance>1x</dance>
                </line>
            </dance>
        </line>

        <line>
            <dance width="4f">4x</dance>
            <dance width="3f">3x</dance>
            <dance width="2f">2x</dance>
            <dance width="1f">1x</dance>
        </line>

        <line>
            <dance width="3f">3x</dance>
            <dance width="2f">2x</dance>
            <dance width="1f">1x</dance>
        </line>

        <line>
            <dance width="2f">2x</dance>
            <dance width="1f">1x</dance>
        </line>

        <line>
            <dance>1x</dance>
        </line>

        <line>
            <dance>
                <line>
                    <dance width="3f">3x</dance>
                    <dance width="1f">1x</dance>
                </line>

                <line>
                    <dance width="2f">2x</dance>
                    <dance width="1f">1x</dance>
                </line>
            </dance>
        </line>
        <script>
            var DanceUI = {
                standardHeight : null,

                GetStandardHeight : function(){
                    DanceUI.standardHeight = document.documentElement.clientHeight / 15;
                },

                DecodeStringUnit : function(str){
                    var resultStr = str.match(/\d+f/);
                    if(resultStr == null){
                        resultStr = str.match(/\d+h/);
                        if(resultStr == null){
                            //出错
                            console.log("DanceUI Error:Cannot get string's unit");
                            console.log("Error String:");
                            console.log(str);
                            return null;
                        }
                        //单位是h
                        return ({
                            num : Math.floor(resultStr[0].substr(0,resultStr[0].length-1)),
                            unit : "h"
                        });
                    }
                    //单位是f
                    return ({
                        num : Math.floor(resultStr[0].substr(0,resultStr[0].length-1)),
                        unit : "f"
                    });
                },

                GetDanceWidthHeight : function(dance){
                    var widthHeightObj = {
                        width  : null,
                        height : null,
                        wUnit  : null,
                        hUnit  : null
                    }

                    /* 如果<dance>有宽高,就获取,否则宽都等于1f,高都等于1h */
                    var danceWidthStr  = dance.getAttribute("width");
                    var danceHeightStr = dance.getAttribute("height");
                    if(danceWidthStr == null){
                        widthHeightObj.width = 1;
                        widthHeightObj.wUnit = "f";
                    }
                    else{

                    }
                    if(danceHeightStr == null){
                        widthHeightObj.height = 1;
                        widthHeightObj.hUnit  = "h";
                    }

                    /* 返回宽高 */
                    
                    var resultStr = str.match(/\d+f/)[0];
                    
                },

                calcDanceUseH : function(danceTag){
                    ;
                }
            }
            

            

            

            function refresh(parent){
                /* 如果父节点是<line>,就开始布局自适应的<dance> */
                if(parent.tagName == "LINE"){
                    for(var i = 0; i < parent.childNodes.length; i++){
                        // /* 获取或赋予并获取每个<dance>的宽高 */
                        

                        // /* 处理宽度 */
                        // var danceWidthF = f2num(danceWidthStr);
                        // console.log(danceWidthF);
                    }
                }
                /* 如果父节点不是<line>,或者处理完<line>了,就继续遍历子节点 */
                for(var i = 0; i < parent.childNodes.length; i++){
                    refresh(parent.childNodes[i]);
                }
            }

            window.onload = function(){
                DanceUI.GetStandardHeight();
                refresh(document.getElementsByTagName("body")[0]);
            }
            window.onresize = function(){
                refresh(document.getElementsByTagName("body")[0]);
            }
        </script>
    </body>
</html>